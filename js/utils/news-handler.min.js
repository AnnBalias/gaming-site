class NewsHandler{constructor(){this.newsData=null,this.currentNewsIndex=null,this.init()}init(){this.setupEventListeners()}setupEventListeners(){document.addEventListener("click",e=>{e.target.classList.contains("read-more-btn")&&(e=e.target.closest(".news-item"))&&(e=parseInt(e.dataset.index),this.showNewsModal(e))}),document.addEventListener("click",e=>{(e.target.classList.contains("news-modal")||e.target.classList.contains("modal-close"))&&this.hideNewsModal()}),document.addEventListener("keydown",e=>{"Escape"===e.key&&this.hideNewsModal()})}showNewsModal(e){window.gameData&&window.gameData.news&&window.gameData.news.articles?this.newsData=window.gameData.news.articles:window.gameData&&window.gameData.news&&window.gameData.news.items?this.newsData=window.gameData.news.items:this.newsData=[{title:"New Song Pack Released!",date:"2025-01-15",excerpt:"Experience 10 new challenging songs with unique rhythms and beats. Available now for all players!",content:"We're excited to announce the release of our latest song pack featuring 10 brand new tracks that will test your rhythm skills to the limit. Each song has been carefully crafted to provide a unique challenge while maintaining the fun and addictive gameplay that players love."},{title:"Tournament Season 3 Begins",date:"2025-01-10",excerpt:"Join the competitive scene and compete against players worldwide. Prizes and recognition await!",content:"The highly anticipated Tournament Season 3 is now live! Compete against players from around the world in weekly challenges and monthly championships. Top performers will receive exclusive rewards and recognition on our global leaderboards."},{title:"Community Update",date:"2025-01-05",excerpt:"We've listened to your feedback and implemented several improvements to enhance your gaming experience.",content:"Based on your valuable feedback, we've made significant improvements to the game including enhanced graphics, smoother gameplay, and new accessibility features. We're committed to making the best rhythm gaming experience possible."}],0<=e&&e<this.newsData.length&&(this.currentNewsIndex=e,e=this.newsData[e],this.createNewsModal(e))}createNewsModal(e){this.hideNewsModal();let t=document.createElement("div");t.className="news-modal",t.innerHTML=`
      <div class="modal-content">
        <div class="modal-header">
          <h2>${e.title}</h2>
          <button class="modal-close">&times;</button>
        </div>
        <div class="modal-body">
          <div class="news-meta">
            <span class="news-date">${new Date(e.date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}</span>
          </div>
          <div class="news-content">
            <p>${e.content||e.excerpt}</p>
          </div>
        </div>
      </div>
    `,document.body.appendChild(t),this.addModalStyles(),setTimeout(()=>{t.classList.add("show")},10)}hideNewsModal(){let e=document.querySelector(".news-modal");e&&(e.classList.remove("show"),setTimeout(()=>{e.remove()},300))}addModalStyles(){var e;document.getElementById("news-modal-styles")||((e=document.createElement("style")).id="news-modal-styles",e.textContent=`
      .news-modal {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.8);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 1000;
        opacity: 0;
        transition: opacity 0.3s ease;
      }
      
      .news-modal.show {
        opacity: 1;
      }
      
      .modal-content {
        background: white;
        border-radius: 8px;
        max-width: 600px;
        width: 90%;
        max-height: 80vh;
        overflow-y: auto;
        transform: scale(0.9);
        transition: transform 0.3s ease;
      }
      
      .news-modal.show .modal-content {
        transform: scale(1);
      }
      
      .modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 20px;
        border-bottom: 1px solid #eee;
      }
      
      .modal-header h2 {
        margin: 0;
        color: #333;
      }
      
      .modal-close {
        background: none;
        border: none;
        font-size: 24px;
        cursor: pointer;
        color: #666;
      }
      
      .modal-close:hover {
        color: #333;
      }
      
      .modal-body {
        padding: 20px;
      }
      
      .news-meta {
        margin-bottom: 15px;
        color: #666;
        font-size: 14px;
      }
      
      .news-content p {
        line-height: 1.6;
        color: #333;
        margin: 0;
      }
    `,document.head.appendChild(e))}}document.addEventListener("DOMContentLoaded",()=>{new NewsHandler});